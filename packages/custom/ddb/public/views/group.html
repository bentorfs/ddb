<section class="container">
    <div data-ng-controller="DdbGroupController">

        <div class="page-header">
            <h1>Group
                <br class="visible-xs"/>
                <small>{{group.name}}</small>
            </h1>
        </div>

        <div class="row">
            <div class="col-md-9">

                <div class="row">
                    <div class="col-md-3">
                        <div class="panel panel-danger">
                            <div class="panel-heading">
                                <h3 class="panel-title">Super Cup</h3>
                            </div>
                            <div class="panel-body">
                                <table class="table table-condensed">
                                    <tr ng-repeat="rank in ranking.rankingSuperCup | limitTo:20"
                                        ng-class="{active: $index === 0}">
                                        <td class="col-xs-2">{{$index + 1}}</td>
                                        <td class="col-xs-6">{{rank.user.username}}</td>
                                        <td class="col-xs-4 text-right">{{rank.value}}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-9">
                        <div class="panel panel-danger">
                            <div class="panel-heading">
                                <h3 class="panel-title">Group Trend</h3>
                            </div>
                            <div class="panel-body">
                                <canvas id="groupTrend" class="chart chart-line" data="groupTrendData"
                                        options="groupTrendDataOptions" legend="true"
                                        colours="['#FF6700', '#FFBF00','#FF001E','#26B600,','#000000', '#1771FF','#FFA200', '#00FFD4']"
                                        labels="groupTrendLabels" series="groupTrendSeries">
                                </canvas>
                            </div>
                            <div class="panel-body text-center">
                                <div class="btn-group" role="group" aria-label="...">
                                    <button type="button" class="btn btn-sm btn-default" ng-click="drawGroupChart(365)"
                                            ng-class="{active: nbGroupDaysShown === 365}">
                                        1 Year
                                    </button>
                                    <button type="button" class="btn btn-sm btn-default" ng-click="drawGroupChart(90)"
                                            ng-class="{active: nbGroupDaysShown === 90}">
                                        3 Months
                                    </button>
                                    <button type="button" class="btn btn-sm btn-default" ng-click="drawGroupChart(30)"
                                            ng-class="{active: nbGroupDaysShown === 30}">
                                        1 Month
                                    </button>
                                    <button type="button" class="btn btn-sm btn-default" ng-click="drawGroupChart(7)"
                                            ng-class="{active: nbGroupDaysShown === 7}">
                                        1 Week
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel panel-danger">
                    <div class="panel-heading">
                        <h3 class="panel-title">Premier Trophies</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Consistency Trophy"
                                                trophy-description="Awarded to the member with the least variation in daily alcohol intake"
                                                ranking="ranking.rankingConsistencyFactor">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Weekend Trophy"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on weekend days"
                                                ranking="ranking.rankingWeekend">
                                </trophy-ranking>
                            </div>
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Habitual Drinker Trophy"
                                                trophy-description="Awarded to the member who is drinking most frequently"
                                                ranking="ranking.rankingDrinkingDayRate">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Sunday Trophy"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on Sundays"
                                                ranking="ranking.rankingSun">
                                </trophy-ranking>
                            </div>
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Binge Trophy"
                                                ranking="ranking.rankingHighestBinge"
                                                trophy-description="Awarded to the member with the highest alcohol intake in one day">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Working Week Trophy"
                                                ranking="ranking.rankingWorkWeek"
                                                trophy-description="Awarded to the member with the highest average alcohol intake from Monday to Thursday">
                                </trophy-ranking>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel panel-danger">
                    <div class="panel-heading">
                        <h3 class="panel-title">Side Trophies</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Pilsner Trophy"
                                                ranking="ranking.rankingPilsner"
                                                trophy-description="Awarded to the member who is drinking the most regular beer">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Trappist Trophy"
                                                ranking="ranking.rankingStrongbeer"
                                                trophy-description="Awarded to the member who is drinking the most strong beers">
                                </trophy-ranking>
                            </div>
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Whisky Trophy"
                                                ranking="ranking.rankingLiquor"
                                                trophy-description="Awarded to the member who is drinking the most liquor">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Wine Trophy"
                                                ranking="ranking.rankingWine"
                                                trophy-description="Awarded to the member who is drinking the most wine">
                                </trophy-ranking>
                            </div>
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Happy Loner Trophy"
                                                ranking="ranking.rankingHappyLoner"
                                                trophy-description="Awarded to the member who is drinking, when the rest of the group isn't">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Sad Loner Trophy"
                                                ranking="ranking.rankingSadLoner"
                                                trophy-description="Awarded to the member who is not drinking, when the rest of the group is">
                                </trophy-ranking>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel panel-danger">
                    <div class="panel-heading">
                        <h3 class="panel-title">Day Trophies</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Monday Trophy"
                                                ranking="ranking.rankingMon"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on Mondays">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Tuesday Trophy"
                                                ranking="ranking.rankingTue"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on Tuesdays">
                                </trophy-ranking>
                            </div>
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Wednesday Trophy"
                                                ranking="ranking.rankingWed"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on Wednesdays">

                                </trophy-ranking>
                                <trophy-ranking trophy-name="Thursday Trophy"
                                                ranking="ranking.rankingThu"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on Thursdays">
                                </trophy-ranking>
                            </div>
                            <div class="col-sm-4">
                                <trophy-ranking trophy-name="Friday Trophy"
                                                ranking="ranking.rankingFri"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on Fridays">
                                </trophy-ranking>
                                <trophy-ranking trophy-name="Saturday Trophy"
                                                ranking="ranking.rankingSat"
                                                trophy-description="Awarded to the member with the highest average alcohol intake on Saturdays">
                                </trophy-ranking>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-md-3">

                <div class="panel panel-warning">
                    <div class="panel-heading">
                        <h3 class="panel-title">Members</h3>
                    </div>
                    <div class="panel-body">
                        <table class="table">
                            <tr ng-repeat="member in group.members | orderBy:'name'">
                                <td>
                                    {{member.username}}
                                </td>
                                <td class="text-right">
                                    <a ui-sref="profile({userId: member._id})"><i class="glyphicon glyphicon-stats"></i></a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="panel panel-warning">
                    <div class="panel-heading">
                        <h3 class="panel-title">Outstanding Invitations</h3>
                    </div>
                    <div class="panel-body">
                        <table class="table">
                            <tr ng-if="!group.invitations.length">
                                <th colspan="2">No outstanding invitations</th>
                            </tr>
                            <tr ng-repeat="member in group.invitations | orderBy:'name'">
                                <td>
                                    {{member.username}}
                                </td>
                                <td class="text-right">
                                    <button class="btn btn-danger btn-sm" ng-click="uninviteUser(member._id)">
                                        <i class="glyphicon glyphicon-remove"/> Revoke
                                    </button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="panel-body">
                        <label>Send more invitations</label>

                        <p>
                            <select-users selection="usersToInvite" selection-limit="1">
                            </select-users>
                        </p>
                        <button class="btn btn-danger" ng-click="inviteUsers()">
                            <i class="glyphicon glyphicon-send"/> Send
                        </button>
                    </div>
                </div>

                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Leave Group</h3>
                    </div>
                    <div class="panel-body">
                        <button class="btn btn-primary" ng-click="leaveGroup()">
                            <i class="glyphicon glyphicon-remove-sign"/> Leave
                        </button>
                    </div>
                </div>

            </div>
        </div>

    </div>

</section>