<div class="" data-ng-controller="DdbGroupController">

    <div class="page-header">
        <h1>Group
            <br class="visible-xs"/>
            <small>{{group.name}}</small>
        </h1>
    </div>

    <div class="row">
        <div class="col-md-9">

            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Premier Trophies</h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Consistency Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingConsistencyFactor | limitTo:3"
                                    ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:3}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Habitual Drinker Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingDrinkingDayRate | limitTo:3"
                                    ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Binge Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingHighestBinge | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Weekend Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingWeekend | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:3}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Sunday Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingSun | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Working Week Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingWorkWeek | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">Side Trophies</h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Pilsner Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingPilsner | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:3}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Whisky Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingLiquor | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Happy Loner Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingHappyLoner | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Trappist Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingStrongbeer | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:3}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Wine Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingWine | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Sad Loner Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingSadLoner | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">Day Trophies</h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Monday Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingMon | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:3}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Wednesday Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingWed | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Friday Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingFri | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Tuesday Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingTue | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:3}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Thursday Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingThu | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th colspan="3">Saturday Trophy</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="rank in ranking.rankingSat | limitTo:3" ng-class="{active: $index === 0}">
                                    <td>{{$index + 1}}</td>
                                    <td>{{rank.user.username}}</td>
                                    <td>{{rank.value | number:2}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-md-3">

            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">Members</h3>
                </div>
                <div class="panel-body">
                    <table class="table">
                        <tr ng-repeat="member in group.members | orderBy:'name'">
                            <td>
                                {{member.username}}
                            </td>
                            <td class="text-right">
                                <a ui-sref="profile({userId: member._id})"><i class="glyphicon glyphicon-stats"></i></a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">Outstanding Invitations</h3>
                </div>
                <div class="panel-body">
                    <table class="table">
                        <tr ng-if="!group.invitations.length">
                            <th colspan="2">No outstanding invitations</th>
                        </tr>
                        <tr ng-repeat="member in group.invitations | orderBy:'name'">
                            <td>
                                {{member.username}}
                            </td>
                            <td class="text-right">
                                <button class="btn btn-default btn-sm" ng-click="uninviteUser(member._id)">
                                    <i class="glyphicon glyphicon-remove"/> Revoke
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="panel-body">
                    <label>Send more invitations</label>

                    <p>
                        <select-users selection="usersToInvite" selection-limit="1">
                        </select-users>
                    </p>
                    <button class="btn btn-primary" ng-click="inviteUsers()">
                        <i class="glyphicon glyphicon-send"/> Send
                    </button>
                </div>
            </div>

            <div class="panel panel-danger">
                <div class="panel-heading">
                    <h3 class="panel-title">Leave Group</h3>
                </div>
                <div class="panel-body">
                    <button class="btn btn-danger" ng-click="leaveGroup()">
                        <i class="glyphicon glyphicon-remove-sign"/> Leave
                    </button>
                </div>
            </div>

        </div>
    </div>

</div>

