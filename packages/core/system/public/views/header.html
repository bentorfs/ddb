<nav class="navbar navbar-inverse" ng-controller="HeaderController as hdrctr">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" ng-init="collapse()"
                    ng-click="navCollapsed = !navCollapsed">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand" href="#">
                <a href="#" ui-sref="dashboard" ng-if="hdrctr.hdrvars.authenticated">
                    <img src="ddb/assets/img/logo.png" style="height: 30px" ng-click="collapse()"/>
                </a>
            </div>
        </div>

        <div class="collapse navbar-collapse" collapse="navCollapsed">
            <ul class="nav navbar-nav">
                <li ng-show="hdrctr.hdrvars.authenticated">
                    <a ui-sref='measurements' ng-click="collapse()"
                       ng-class="{active: isActive('measurements')}">
                        <i class="glyphicon glyphicon-list"/> &nbsp; History
                    </a>
                </li>
                <li ng-show="hdrctr.hdrvars.authenticated">
                    <a ui-sref='profile({userId: hdrctr.hdrvars.user._id})' ng-click="collapse()"
                       ng-class="{active: isActive('profile')}">
                        <i class="glyphicon glyphicon-stats"/> &nbsp; Profile
                    </a>
                </li>
                <li ng-show="hdrctr.hdrvars.authenticated">
                    <a ui-sref='catalog' ng-click="collapse()"
                       ng-class="{active: isActive('catalog')}">
                        <i class="glyphicon glyphicon-glass"/> &nbsp; Catalog
                    </a>
                </li>
                <li class="dropdown" ng-show="hdrctr.hdrvars.authenticated" dropdown>
                    <a href="#" class="dropdown-toggle"
                       ng-class="{active: isActive('group')|| isActive('managegroups')}" href dropdown-toggle>
                        <i class="glyphicon glyphicon-globe"/> &nbsp; Groups
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="#" ui-sref="managegroups" ng-click="collapse()">
                                <i class="glyphicon glyphicon-link"/> &nbsp; Manage Groups
                            </a>
                        </li>
                        <li class="divider" ng-if="groups.length"></li>
                        <li ng-repeat="group in groups | orderBy:'name'">
                            <a href="#" ui-sref="group({groupId: group._id})" ng-click="collapse()">
                                <i class="glyphicon glyphicon-globe"/> &nbsp; {{group.name}}
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a ui-sref='auth.register' ng-show="!hdrctr.hdrvars.authenticated" ng-click="collapse()"
                       ng-class="{active: isActive('auth.register')}">
                        <i class="glyphicon glyphicon-pencil"/> &nbsp; Join
                    </a>
                </li>
                <li>
                    <a ui-sref='auth.login' ng-show="!hdrctr.hdrvars.authenticated" ng-click="collapse()"
                       ng-class="{active: isActive('auth.login')}">
                        <i class="glyphicon glyphicon-log-in"/> &nbsp; Log In
                    </a>
                </li>
                <li class="dropdown" ng-show="hdrctr.hdrvars.authenticated" dropdown>
                    <a href="#" class="dropdown-toggle" href dropdown-toggle
                       ng-style="{'color': notifications.length ? '#FF7400 ' : ''}">
                        <i class="glyphicon glyphicon-envelope"/>
                        &nbsp; {{notifications.length || 0}}
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="notification in notifications">
                            <notification-item notification="notification"></notification-item>
                        </li>
                        <li ng-if="!notifications.length" class="dropdown-header">
                            You have no notifications
                        </li>
                    </ul>
                </li>
                <li ng-show="hdrctr.hdrvars.authenticated">
                    <a ui-sref='tools({userId: hdrctr.hdrvars.user._id})' ng-click="collapse()"
                       ng-class="{active: isActive('tools')}">
                        <i class="glyphicon glyphicon-wrench"/> &nbsp; Tools
                    </a>
                </li>
                <li class="dropdown" ng-show="hdrctr.hdrvars.authenticated" dropdown>
                    <a href="#" class="dropdown-toggle" href dropdown-toggle>
                        <i class="glyphicon glyphicon-user"/> &nbsp; {{hdrctr.hdrvars.user.name}}
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="#" ng-click="hdrctr.logout(); collapse()">
                                <i class="glyphicon glyphicon-log-out"/> &nbsp; Log Out</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>
